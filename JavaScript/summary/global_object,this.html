<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Object / this</title>
</head>
<body>
    <h1>전역 객체</h1>
    <p>모든 객체는 전역 객체의 프로퍼티임</p>
    <pre>
        let o = {'func':function(){
            alert('Hello');
        }}
        o.func();
        window.o.func();    // window가 전역 객체
    </pre>
    <p>서버측 node.js와 같은 것에서는 'Global'이라는 전역 객체가 존재 : 호스트 환경에 따라 달라질 수 있음</p>

    <h1>this</h1>
    <p>함수 내에서 함수 호출 맥락(context)를 의미, 함수를 어떻게 호출하느냐에 따라서 this가 가르키는 대상이 달라짐</p>
    <p>함수 안에서 사용되는데 일종의 변수이면서 약속되어 있고, 실질적인 연결점의 역할을 함</p>
    <pre>
        function func(){
            if(window === this){
                document.write("window === this");
            }
        }
        func();     // window === this 출력
    </pre>

    <h3>메소드의 this 호출</h3>
    <pre>
        let o = {
            func : function(){
                if(o === this){
                    document.write("o === this")
                }
            }
        }
        o.func();   // o === this 출력
    </pre>

    <h3>생성자 안의 this</h3>
    <pre>
        let funcThis = null;

        function Func(){
            funcThis = this;
        }
        let o1 = Func();
        if(funcThis === window){
            document.write('window </br>');
        }
        let o2 = new Func();
        if(funcThis === o2){
            document.write('o2 </br>');
        }
        // window
        // o2
    </pre>

    <h3>apply / call</h3>
    <p>함수의 메소드인 apply, call을 이용하면 this의 값을 제어할 수 있음</p>
    <pre>
        let o = {}
        let p = {}
        function func(){
            switch(this){
                case o :
                    document.write('o');
                    break;
                case p :
                    document.write('p');
                    break;
                case window :
                    document.write('window');
                    break;
            }
        }
        func();             // window
        func.apply(o);      // o
        func.apply(p);      // p
    </pre>

</body>
</html>